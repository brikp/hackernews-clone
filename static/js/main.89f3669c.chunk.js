(window["webpackJsonphackernews-clone"]=window["webpackJsonphackernews-clone"]||[]).push([[0],{25:function(e,t,n){e.exports=n(48)},30:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(22),o=n.n(c),u=(n(30),n(4)),i=n(5),l=n(7),s=n(6),p=n(8),h=n(10),m=n(13),f=a.a.createContext(),d=f.Consumer,v=f.Provider,b=d,g=v;function y(){return a.a.createElement(b,null,(function(e){var t=e.theme,n=e.toggleTheme;return a.a.createElement("nav",null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(h.c,{to:"/",exact:!0},"Top")),a.a.createElement("li",null,a.a.createElement(h.c,{to:"/new"},"New"))),a.a.createElement("button",{onClick:n,type:"button"},"light"===t?"\ud83d\udd26":"\ud83d\udca1"))}))}var E=n(2),w=n.n(E),j=n(12),k="https://hacker-news.firebaseio.com/v0",x=".json";function O(e){return S.apply(this,arguments)}function S(){return(S=Object(j.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(k,"/item/").concat(t).concat(x));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function C(){return F.apply(this,arguments)}function F(){return(F=Object(j.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/topstories").concat(x));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return T.apply(this,arguments)}function T(){return(T=Object(j.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/newstories").concat(x));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(j.a)(w.a.mark((function e(){var t,n,r,a,c,o=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:500,n=o.length>1&&void 0!==o[1]?o[1]:0,e.next=4,C();case 4:return r=e.sent,a=r.slice(n,n+t),c=a.reduce((function(e,t){var n=O(t);return e.push(n),e}),[]),e.abrupt("return",Promise.all(c).then((function(e){return e})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(j.a)(w.a.mark((function e(){var t,n,r,a,c,o=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:500,n=o.length>1&&void 0!==o[1]?o[1]:0,e.next=4,P();case 4:return r=e.sent,a=r.slice(n,n+t),c=a.reduce((function(e,t){var n=O(t);return e.push(n),e}),[]),e.abrupt("return",Promise.all(c).then((function(e){return e})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(j.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/user/").concat(t).concat(x));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(j.a)(w.a.mark((function e(t,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.submitted.reduce((function(e,t,r){if(r>n)return e;var a=O(t);return e.push(a),e}),[]),e.abrupt("return",Promise.all(r).then((function(e){return e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(j.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.kids){e.next=2;break}return e.abrupt("return",[]);case 2:return n=t.kids.map((function(e){return O(e)})),e.abrupt("return",Promise.all(n).then((function(e){return e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L={content:{fontSize:"35px",position:"absolute",left:"0",right:"0",marginTop:"20px",textAlign:"center"}},H=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={content:n.props.text},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.text,r=t.speed;this.interval=window.setInterval((function(){e.state.content==="".concat(n,"...")?e.setState({content:n}):e.setState((function(e){var t=e.content;return{content:"".concat(t,".")}}))}),r)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state.content;return a.a.createElement("p",{style:L.content},e)}}]),t}(a.a.Component);function J(e){return new Date(1e3*e).toUTCString()}function _(e){return{__html:e}}function z(e){var t=e.by,n=e.time,r=e.title,c=e.url,o=e.id,u=e.kids,i=J(n),l=c||"/post?id=".concat(o);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("h3",null,a.a.createElement("a",{href:l},r))),a.a.createElement("div",null,a.a.createElement("h4",null," by ",a.a.createElement(h.b,{to:{pathname:"/user",search:"?id=".concat(t)}},t)," on ",i," with ",a.a.createElement(h.b,{to:{pathname:"/post",search:"?id=".concat(o)}},u.length)," comments")))}function B(e){var t=e.stories;return a.a.createElement("ul",null,t.map((function(e){var t=e.by,n=e.kids,r=e.id,c=e.time,o=e.title,u=e.url;return"story"!==e.type?null:a.a.createElement("li",{key:r},a.a.createElement(z,{by:t,kids:n||[],title:o,time:c,url:u,id:r}))})))}H.defaultProps={text:"Loading",speed:250};var N=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={stories:[],error:null,loading:!0},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(){return A.apply(this,arguments)})(50).then((function(t){e.setState({stories:t,loading:!1})})).catch((function(t){console.warn("Error fetching data: ",t),e.setState({error:"There was an error fetching data",loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.stories,n=e.error,r=e.loading;return a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(H,{text:"Fetching top stories"}),n&&a.a.createElement("p",null,n),t.length&&a.a.createElement(B,{stories:t}))}}]),t}(a.a.Component),W=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={stories:[],error:null,loading:!0},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(){return M.apply(this,arguments)})(50).then((function(t){e.setState({stories:t,loading:!1})})).catch((function(t){console.warn("Error fetching data: ",t),e.setState({error:"There was an error fetching data",loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.stories,n=e.error,r=e.loading;return a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(H,{text:"Fetching new stories"}),n&&a.a.createElement("p",null,n),t.length&&a.a.createElement(B,{stories:t}))}}]),t}(a.a.Component),q=n(16),G=n.n(q),K=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={loadingUser:!0,loadingPosts:!0,user:null,posts:null},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location;(function(e){return D.apply(this,arguments)})(G.a.parse(t.search).id).then((function(t){e.setState({user:t,loadingUser:!1}),function(e,t){return I.apply(this,arguments)}(t,20).then((function(t){var n=t.reduce((function(e,t){return"story"===t.type&&e.push(t),e}),[]);e.setState({posts:n,loadingPosts:!1})}))}))}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.posts,r=e.loadingPosts,c=e.loadingUser;return a.a.createElement(a.a.Fragment,null,c&&a.a.createElement(H,{text:"Fetching user data"}),!c&&r&&a.a.createElement(H,{text:"Fetching user stories"}),t&&a.a.createElement("div",null,a.a.createElement("h1",null,t.id),a.a.createElement("h4",null,"joined ".concat(J(t.created)," has ").concat(t.karma," karma")),t.about&&a.a.createElement("p",{dangerouslySetInnerHTML:_(t.about)})),n&&a.a.createElement("div",null,a.a.createElement("h2",null,"Posts"),n.length>0?a.a.createElement(B,{stories:n}):a.a.createElement("p",null,"This user did not submit any stories yet")))}}]),t}(a.a.Component);function Q(e){var t=e.by,n=e.time,r=e.text,c=J(n);return a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,"by ",a.a.createElement(h.b,{to:{pathname:"/user",search:"?id=".concat(t)}},t)," on ".concat(c)),a.a.createElement("p",{dangerouslySetInnerHTML:_(r)}))}function R(e){var t=e.comments;return a.a.createElement("ul",null,t.length>0&&t.map((function(e){var t=e.id,n=e.by,r=e.time,c=e.text;return a.a.createElement("li",{key:t},a.a.createElement(Q,{by:n,time:r,text:c}))})))}var V=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={story:null,comments:null,loadingStory:!0,loadingComments:!0},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location;O(G.a.parse(t.search).id).then((function(t){e.setState({story:t,loadingStory:!1}),function(e){return U.apply(this,arguments)}(t).then((function(t){e.setState({comments:t,loadingComments:!1})}))}))}},{key:"render",value:function(){var e=this.state,t=e.story,n=e.comments,r=e.loadingStory,c=e.loadingComments;return a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(H,{text:"Fetching story"}),!r&&c&&a.a.createElement(H,{text:"Fetching comments"}),t&&a.a.createElement(z,{by:t.by,kids:n||[],title:t.title,time:t.time,url:t.url,id:t.id}),n&&a.a.createElement(R,{comments:n}))}}]),t}(a.a.Component),X=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={theme:"light",toggleTheme:function(){n.setState((function(e){return{theme:"light"===e.theme?"dark":"light"}}))}},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="light"===this.state.theme?{background:"rgb(255, 215, 0)"}:{background:"rgb(255, 191, 116)"};return a.a.createElement(h.a,null,a.a.createElement(g,{value:this.state},a.a.createElement("div",{style:e},a.a.createElement(y,null),a.a.createElement(m.c,null,a.a.createElement(m.a,{exact:!0,path:"/",component:N}),a.a.createElement(m.a,{exact:!0,path:"/new",component:W}),a.a.createElement(m.a,{path:"/user",component:K}),a.a.createElement(m.a,{path:"/post",component:V}),a.a.createElement(m.a,{render:function(){return a.a.createElement("h1",null,"404")}})))))}}]),t}(a.a.Component);o.a.render(a.a.createElement(X,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.89f3669c.chunk.js.map